<!-- Google Fonts & Bootstrap Icons -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

<header class="main-title mb-4 text-center">
  <h1><i class="bi bi-person-lines-fill me-2"></i> Currículos</h1>
</header>

<div class="curriculos-container">

  <!-- Título do formulário -->
  <section class="form-title-container mb-3">
    <h2>
      <i class="bi bi-pencil-square me-2"></i>
      {{ curriculo.id ? 'Editando: ' + curriculo.nome : 'Cadastrar Novo Currículo' }}
    </h2>
  </section>

  <!-- Formulário -->
  <section class="form-card mb-4">
    <form #form="ngForm" (ngSubmit)="form.valid && salvarCurriculo()" novalidate>
      <div class="container-cadastro">

        <!-- ID -->
        <div class="input-group mb-3">
          <label for="id" class="form-label">ID</label>
          <input
            type="number"
            id="id"
            name="id"
            class="form-control"
            [(ngModel)]="curriculo.id"
            required
            placeholder="Ex: 1"
            #id="ngModel"
          />
          <div *ngIf="id.invalid && id.touched" class="text-danger small">ID é obrigatório.</div>
        </div>

        <!-- Nome -->
        <div class="input-group mb-3">
          <label for="nome" class="form-label">Nome <span class="required">*</span></label>
          <input
            type="text"
            id="nome"
            name="nome"
            class="form-control"
            [(ngModel)]="curriculo.nome"
            required
            minlength="3"
            placeholder="Ex: João Silva"
            #nome="ngModel"
          />
          <div *ngIf="nome.invalid && nome.touched" class="text-danger small">
            O nome é obrigatório (mínimo 3 letras).
          </div>
        </div>

        <!-- Idade -->
        <div class="input-group mb-3">
          <label for="idade" class="form-label">Idade</label>
          <input
            type="number"
            id="idade"
            name="idade"
            class="form-control"
            [(ngModel)]="curriculo.idade"
            min="16"
            placeholder="Ex: 30"
            #idade="ngModel"
          />
          <div *ngIf="idade.invalid && idade.touched" class="text-danger small">Idade mínima: 16 anos.</div>
        </div>

       <!-- Telefone -->
<div class="input-group mb-3">
  <label for="telefone" class="form-label">Telefone</label>
  <input
    type="text"
    id="telefone"
    name="telefone"
    class="form-control"
    mask="(00) 00000-0000"
    [(ngModel)]="curriculo.telefone"
    placeholder="(00) 00000-0000"
    required
    #telefone="ngModel"
  />
  <div *ngIf="telefone.invalid && telefone.touched" class="text-danger small">
    Telefone no formato: (00) 00000-0000
  </div>
</div>


        <!-- Email -->
        <div class="input-group mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            [(ngModel)]="curriculo.email"
            required
            placeholder="exemplo@email.com"
            #email="ngModel"
          />
          <div *ngIf="email.invalid && email.touched" class="text-danger small">
            Email válido é obrigatório.
          </div>
        </div>

        <!-- Descrição -->
        <div class="input-group mb-3">
          <label for="descricao" class="form-label">Descrição</label>
          <textarea
            id="descricao"
            name="descricao"
            class="form-control"
            rows="3"
            [(ngModel)]="curriculo.descricao"
            minlength="10"
            placeholder="Formação, experiência, etc."
            #descricao="ngModel"
          ></textarea>
          <div *ngIf="descricao.invalid && descricao.touched" class="text-danger small">
            Mínimo 10 caracteres.
          </div>
        </div>

        <!-- Botões -->
        <div class="btn-group d-flex justify-content-end gap-2 mt-3">
          <button type="button" class="btn btn-outline-secondary" (click)="resetarFormularioCurriculo()">
            <i class="bi bi-x-circle me-1"></i> Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
            <i class="bi bi-check-circle me-1"></i> {{ curriculo.id ? 'Atualizar' : 'Cadastrar' }}
          </button>
        </div>
      </div>
    </form>
  </section>

  <!-- Lista de currículos -->
  <section>
    <h3 class="mb-3"><i class="bi bi-card-list me-2"></i> Currículos Cadastrados</h3>
    <div class="table-responsive shadow-sm rounded-3 overflow-hidden">
      <table class="table table-hover table-bordered align-middle text-center modern-table">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Idade</th>
            <th>Telefone</th>
            <th>Email</th>
            <th>Descrição</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of curriculos" (click)="listarCurriculoPorId(c)" style="cursor:pointer;">
            <td>{{ c.id }}</td>
            <td>{{ c.nome }}</td>
            <td>{{ c.idade }}</td>
            <td>{{ c.telefone }}</td>
            <td>{{ c.email }}</td>
            <td>{{ c.descricao }}</td>
            <td>
              <button class="btn btn-warning btn-sm me-2" (click)="listarCurriculoPorId(c)">
                <i class="bi bi-pencil-fill"></i> Editar
              </button>
              <button class="btn btn-danger btn-sm" (click)="excluirCurriculo(c.id)">
                <i class="bi bi-trash-fill"></i> Excluir
              </button>
            </td>
          </tr>
          <tr *ngIf="curriculos.length === 0">
            <td colspan="7" class="text-muted">Nenhum currículo cadastrado.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

</div>
